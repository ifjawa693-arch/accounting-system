# ğŸš€ ç½‘æ˜“äº‘æœåŠ¡å™¨éƒ¨ç½²è¯¦ç»†æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¡®è®¤æœåŠ¡å™¨ä¿¡æ¯
- âœ… æœåŠ¡å™¨IPåœ°å€ï¼š`ä½ çš„æœåŠ¡å™¨IP`
- âœ… SSHç™»å½•ç”¨æˆ·åå’Œå¯†ç ï¼ˆæˆ–å¯†é’¥ï¼‰
- âœ… æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼ˆé€šå¸¸æ˜¯ Ubuntu æˆ– CentOSï¼‰

### 2. æœ¬åœ°å‡†å¤‡
- âœ… ç¡®ä¿æœ¬åœ°ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œ
- âœ… å‡†å¤‡å¥½é¡¹ç›®æ–‡ä»¶ï¼ˆæˆ–ä½¿ç”¨Gitï¼‰

---

## ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šè¿æ¥æœåŠ¡å™¨

### Windowsç³»ç»Ÿä½¿ç”¨SSH

**æ–¹æ³•1ï¼šä½¿ç”¨PowerShellï¼ˆæ¨èï¼‰**
```powershell
# æ‰“å¼€PowerShellï¼Œè¾“å…¥ï¼š
ssh root@ä½ çš„æœåŠ¡å™¨IP
# æˆ–
ssh ç”¨æˆ·å@ä½ çš„æœåŠ¡å™¨IP
```

**æ–¹æ³•2ï¼šä½¿ç”¨PuTTY**
1. ä¸‹è½½å¹¶å®‰è£… PuTTY
2. è¾“å…¥æœåŠ¡å™¨IPå’Œç«¯å£ï¼ˆé»˜è®¤22ï¼‰
3. ç‚¹å‡»"Open"è¿æ¥

**æ–¹æ³•3ï¼šä½¿ç”¨VS Codeè¿œç¨‹è¿æ¥**
1. å®‰è£…"Remote - SSH"æ‰©å±•
2. æŒ‰ `Ctrl+Shift+P`ï¼Œè¾“å…¥"Remote-SSH: Connect to Host"
3. è¾“å…¥ï¼š`root@ä½ çš„æœåŠ¡å™¨IP`

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šå®‰è£…Node.js

è¿æ¥æœåŠ¡å™¨åï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å·²å®‰è£…Node.jsï¼š

```bash
node --version
npm --version
```

å¦‚æœæ˜¾ç¤º"command not found"ï¼Œéœ€è¦å®‰è£…ï¼š

### Ubuntu/Debianç³»ç»Ÿï¼š

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update
sudo apt upgrade -y

# 2. å®‰è£…Node.js 18.xï¼ˆæ¨èï¼‰
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# 3. éªŒè¯å®‰è£…
node --version  # åº”è¯¥æ˜¾ç¤º v18.x.x
npm --version   # åº”è¯¥æ˜¾ç¤º 9.x.x æˆ–æ›´é«˜
```

### CentOSç³»ç»Ÿï¼š

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo yum update -y

# 2. å®‰è£…Node.js 18.x
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# 3. éªŒè¯å®‰è£…
node --version
npm --version
```

---

## ğŸ“¤ ç¬¬ä¸‰æ­¥ï¼šä¸Šä¼ é¡¹ç›®æ–‡ä»¶

### æ–¹æ³•1ï¼šä½¿ç”¨Gitï¼ˆæ¨èï¼Œé€‚åˆæœ‰Gitä»“åº“ï¼‰

**åœ¨æœåŠ¡å™¨ä¸Šï¼š**
```bash
# 1. å®‰è£…Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
sudo apt install git -y  # Ubuntu
# æˆ–
sudo yum install git -y  # CentOS

# 2. åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /var/www
cd /var/www

# 3. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœæœ‰Gitä»“åº“ï¼‰
git clone ä½ çš„Gitä»“åº“åœ°å€
cd accounting-system

# 4. å¦‚æœæ²¡æœ‰Gitä»“åº“ï¼Œç»§ç»­çœ‹æ–¹æ³•2
```

### æ–¹æ³•2ï¼šä½¿ç”¨SCPä¸Šä¼ ï¼ˆé€‚åˆç›´æ¥ä¸Šä¼ æ–‡ä»¶ï¼‰

**åœ¨æœ¬åœ°Windows PowerShellä¸­ï¼š**

```powershell
# 1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd D:\Cursor\program

# 2. ä¸Šä¼ æ•´ä¸ªé¡¹ç›®ï¼ˆæ’é™¤node_modulesï¼‰
scp -r -o StrictHostKeyChecking=no . root@ä½ çš„æœåŠ¡å™¨IP:/var/www/accounting-system

# æ³¨æ„ï¼šè¿™ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºåŒ…å«äº†node_modules
# æ›´å¥½çš„æ–¹æ³•æ˜¯å…ˆæ‰“åŒ…ï¼Œæ’é™¤node_modules
```

### æ–¹æ³•3ï¼šä½¿ç”¨WinSCPï¼ˆå›¾å½¢ç•Œé¢ï¼Œæ¨èï¼‰

1. **ä¸‹è½½WinSCP**ï¼šhttps://winscp.net/
2. **è¿æ¥æœåŠ¡å™¨**ï¼š
   - æ–‡ä»¶åè®®ï¼šSFTP
   - ä¸»æœºåï¼šä½ çš„æœåŠ¡å™¨IP
   - ç”¨æˆ·åï¼šrootï¼ˆæˆ–ä½ çš„ç”¨æˆ·åï¼‰
   - å¯†ç ï¼šä½ çš„å¯†ç 
3. **ä¸Šä¼ æ–‡ä»¶**ï¼š
   - å·¦ä¾§ï¼šæœ¬åœ°é¡¹ç›®æ–‡ä»¶å¤¹ `D:\Cursor\program`
   - å³ä¾§ï¼šæœåŠ¡å™¨ç›®å½• `/var/www/accounting-system`
   - æ‹–æ‹½ä¸Šä¼ æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹
   - **æ³¨æ„**ï¼šå¯ä»¥æ’é™¤ `node_modules` æ–‡ä»¶å¤¹ï¼ˆä¸Šä¼ åé‡æ–°å®‰è£…ï¼‰

### æ–¹æ³•4ï¼šä½¿ç”¨å‹ç¼©åŒ…ä¸Šä¼ 

**åœ¨æœ¬åœ°ï¼š**
```powershell
# 1. å‹ç¼©é¡¹ç›®ï¼ˆæ’é™¤node_modulesï¼‰
# ä½¿ç”¨7-Zipæˆ–WinRARå‹ç¼©é¡¹ç›®æ–‡ä»¶å¤¹
# æ’é™¤ï¼šnode_modules, .git, accounting.db

# 2. ä¸Šä¼ å‹ç¼©åŒ…
scp accounting-system.zip root@ä½ çš„æœåŠ¡å™¨IP:/tmp/
```

**åœ¨æœåŠ¡å™¨ä¸Šï¼š**
```bash
# 1. è§£å‹
cd /var/www
sudo unzip /tmp/accounting-system.zip -d accounting-system
cd accounting-system

# 2. è®¾ç½®æƒé™
sudo chown -R $USER:$USER /var/www/accounting-system
```

---

## ğŸ“¦ ç¬¬å››æ­¥ï¼šå®‰è£…ä¾èµ–å’Œæ„å»º

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/accounting-system

# 2. å®‰è£…å‰ç«¯ä¾èµ–
npm install

# 3. æ„å»ºå‰ç«¯ï¼ˆç”Ÿæˆdistæ–‡ä»¶å¤¹ï¼‰
npm run build

# 4. è¿›å…¥åç«¯ç›®å½•
cd backend

# 5. å®‰è£…åç«¯ä¾èµ–
npm install

# 6. éªŒè¯å®‰è£…
ls -la  # åº”è¯¥çœ‹åˆ°node_modulesæ–‡ä»¶å¤¹
```

**å¦‚æœnpm installå¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒï¼š**

```bash
# è®¾ç½®npmé•œåƒï¼ˆå¯é€‰ï¼‰
npm config set registry https://registry.npmmirror.com

# ç„¶åå†æ‰§è¡Œnpm install
```

---

## ğŸ”§ ç¬¬äº”æ­¥ï¼šé…ç½®ç”Ÿäº§ç¯å¢ƒ

### 1. ä¿®æ”¹å‰ç«¯APIåœ°å€

**åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘ï¼š**
```bash
cd /var/www/accounting-system
nano src/services/api.ts
```

**æ‰¾åˆ°è¿™ä¸€è¡Œï¼š**
```typescript
const API_BASE_URL = 'http://localhost:3001/api';
```

**ä¿®æ”¹ä¸ºï¼ˆæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼‰ï¼š**

**é€‰é¡¹Aï¼šä½¿ç”¨æœåŠ¡å™¨IP**
```typescript
const API_BASE_URL = 'http://ä½ çš„æœåŠ¡å™¨IP:3001/api';
```

**é€‰é¡¹Bï¼šä½¿ç”¨åŸŸåï¼ˆå¦‚æœæœ‰ï¼‰**
```typescript
const API_BASE_URL = 'http://ä½ çš„åŸŸå/api';
```

**é€‰é¡¹Cï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆæ¨èï¼Œé…åˆNginxï¼‰**
```typescript
const API_BASE_URL = '/api';
```

**ä¿å­˜åé‡æ–°æ„å»ºï¼š**
```bash
npm run build
```

### 2. é…ç½®åç«¯ç«¯å£ï¼ˆå¯é€‰ï¼‰

```bash
cd /var/www/accounting-system/backend
nano server.js
```

**æ‰¾åˆ°ï¼š**
```javascript
const PORT = process.env.PORT || 3001;
```

**å¯ä»¥ä¿æŒä¸å˜ï¼Œæˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š**
```bash
export PORT=3001
```

---

## ğŸš€ ç¬¬å…­æ­¥ï¼šå®‰è£…PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰

PM2å¯ä»¥ä¿æŒåç«¯æœåŠ¡æŒç»­è¿è¡Œï¼Œå³ä½¿æ–­å¼€SSHè¿æ¥ä¹Ÿä¸ä¼šåœæ­¢ã€‚

```bash
# 1. å…¨å±€å®‰è£…PM2
sudo npm install -g pm2

# 2. è¿›å…¥åç«¯ç›®å½•
cd /var/www/accounting-system/backend

# 3. ä½¿ç”¨PM2å¯åŠ¨åç«¯æœåŠ¡
pm2 start server.js --name accounting-api

# 4. æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
pm2 status

# 5. æŸ¥çœ‹æ—¥å¿—
pm2 logs accounting-api

# 6. è®¾ç½®PM2å¼€æœºè‡ªå¯
pm2 startup
# æ‰§è¡Œä¸Šé¢å‘½ä»¤åï¼Œä¼šæ˜¾ç¤ºä¸€è¡Œå‘½ä»¤ï¼Œå¤åˆ¶å¹¶æ‰§è¡Œå®ƒ
# ä¾‹å¦‚ï¼šsudo env PATH=$PATH:/usr/bin pm2 startup systemd -u root --hp /root

# 7. ä¿å­˜å½“å‰PM2è¿›ç¨‹åˆ—è¡¨
pm2 save
```

**PM2å¸¸ç”¨å‘½ä»¤ï¼š**
```bash
pm2 status              # æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çŠ¶æ€
pm2 logs accounting-api # æŸ¥çœ‹æ—¥å¿—
pm2 restart accounting-api  # é‡å¯æœåŠ¡
pm2 stop accounting-api     # åœæ­¢æœåŠ¡
pm2 delete accounting-api   # åˆ é™¤æœåŠ¡
pm2 monit                # ç›‘æ§é¢æ¿
```

---

## ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šå®‰è£…å’Œé…ç½®Nginx

Nginxä½œä¸ºåå‘ä»£ç†ï¼Œå¯ä»¥ï¼š
- æä¾›å‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡
- å°†APIè¯·æ±‚è½¬å‘åˆ°åç«¯
- ç»Ÿä¸€ä½¿ç”¨80ç«¯å£è®¿é—®

### 1. å®‰è£…Nginx

```bash
# Ubuntu/Debian
sudo apt install nginx -y

# CentOS
sudo yum install nginx -y

# å¯åŠ¨Nginx
sudo systemctl start nginx
sudo systemctl enable nginx  # å¼€æœºè‡ªå¯
```

### 2. é…ç½®Nginx

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/accounting
```

**ç²˜è´´ä»¥ä¸‹é…ç½®ï¼ˆæ ¹æ®ä½ çš„æƒ…å†µä¿®æ”¹ï¼‰ï¼š**

```nginx
server {
    listen 80;
    server_name ä½ çš„æœåŠ¡å™¨IP;  # æˆ–ä½ çš„åŸŸå

    # å‰ç«¯é™æ€æ–‡ä»¶ç›®å½•
    root /var/www/accounting-system/dist;
    index index.html;

    # å‰ç«¯è·¯ç”±ï¼ˆReact Routeréœ€è¦ï¼‰
    location / {
        try_files $uri $uri/ /index.html;
    }

    # åç«¯APIä»£ç†
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

**ä¿å­˜æ–‡ä»¶ï¼ˆCtrl+Oï¼Œå›è½¦ï¼ŒCtrl+Xï¼‰**

### 3. å¯ç”¨é…ç½®

```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/accounting /etc/nginx/sites-enabled/

# åˆ é™¤é»˜è®¤é…ç½®ï¼ˆå¯é€‰ï¼‰
sudo rm /etc/nginx/sites-enabled/default

# æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®
sudo nginx -t

# å¦‚æœæ˜¾ç¤º"test is successful"ï¼Œé‡å¯Nginx
sudo systemctl restart nginx

# æŸ¥çœ‹NginxçŠ¶æ€
sudo systemctl status nginx
```

---

## ğŸ”¥ ç¬¬å…«æ­¥ï¼šé…ç½®é˜²ç«å¢™

### Ubuntu/Debianï¼ˆä½¿ç”¨ufwï¼‰ï¼š

```bash
# 1. æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# 2. å¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp     # HTTP
sudo ufw allow 443/tcp    # HTTPSï¼ˆå¦‚æœä½¿ç”¨ï¼‰

# 3. å¯ç”¨é˜²ç«å¢™
sudo ufw enable

# 4. é‡æ–°åŠ è½½
sudo ufw reload
```

### CentOSï¼ˆä½¿ç”¨firewalldï¼‰ï¼š

```bash
# 1. æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo systemctl status firewalld

# 2. å¼€æ”¾ç«¯å£
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --permanent --add-port=22/tcp

# 3. é‡æ–°åŠ è½½é˜²ç«å¢™
sudo firewall-cmd --reload
```

### ç½‘æ˜“äº‘æœåŠ¡å™¨æ§åˆ¶å°é…ç½®

**é‡è¦ï¼š** é™¤äº†æœåŠ¡å™¨é˜²ç«å¢™ï¼Œè¿˜éœ€è¦åœ¨ç½‘æ˜“äº‘æ§åˆ¶å°é…ç½®å®‰å…¨ç»„ï¼š

1. ç™»å½•ç½‘æ˜“äº‘æ§åˆ¶å°
2. æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨å®ä¾‹
3. è¿›å…¥"å®‰å…¨ç»„"æˆ–"é˜²ç«å¢™"è®¾ç½®
4. æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - ç«¯å£ï¼š80ï¼Œåè®®ï¼šTCPï¼Œæ¥æºï¼š0.0.0.0/0
   - ç«¯å£ï¼š443ï¼Œåè®®ï¼šTCPï¼Œæ¥æºï¼š0.0.0.0/0ï¼ˆå¦‚æœä½¿ç”¨HTTPSï¼‰
   - ç«¯å£ï¼š22ï¼Œåè®®ï¼šTCPï¼Œæ¥æºï¼šä½ çš„IPï¼ˆSSHï¼Œå»ºè®®é™åˆ¶æ¥æºï¼‰

---

## âœ… ç¬¬ä¹æ­¥ï¼šæµ‹è¯•éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥PM2
pm2 status

# æ£€æŸ¥Nginx
sudo systemctl status nginx

# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep :3001
sudo netstat -tulpn | grep :80
```

### 2. æµ‹è¯•è®¿é—®

**åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š**
```
http://ä½ çš„æœåŠ¡å™¨IP
```

**åº”è¯¥èƒ½çœ‹åˆ°ç³»ç»Ÿé¦–é¡µ**

### 3. æµ‹è¯•åŠŸèƒ½

- âœ… æ‰“å¼€ç³»ç»Ÿé¦–é¡µ
- âœ… å°è¯•æ·»åŠ ä¸€ä¸ªå®¢æˆ·
- âœ… åˆ·æ–°é¡µé¢ï¼Œæ•°æ®åº”è¯¥è¿˜åœ¨
- âœ… æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œçœ‹æ˜¯å¦æœ‰é”™è¯¯

### 4. æŸ¥çœ‹æ—¥å¿—ï¼ˆå¦‚æœæœ‰é—®é¢˜ï¼‰

```bash
# åç«¯æ—¥å¿—
pm2 logs accounting-api

# Nginxè®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/access.log

# Nginxé”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log
```

---

## ğŸ”„ ç¬¬åæ­¥ï¼šæ›´æ–°ä»£ç ï¼ˆåç»­éƒ¨ç½²ï¼‰

å½“éœ€è¦æ›´æ–°ä»£ç æ—¶ï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/accounting-system

# 2. å¦‚æœä½¿ç”¨Git
git pull

# 3. å¦‚æœæ‰‹åŠ¨ä¸Šä¼ ï¼Œå…ˆä¸Šä¼ æ–°æ–‡ä»¶ï¼Œç„¶åï¼š

# 4. é‡æ–°å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰æ–°ä¾èµ–ï¼‰
npm install
cd backend
npm install
cd ..

# 5. é‡æ–°æ„å»ºå‰ç«¯
npm run build

# 6. é‡å¯åç«¯æœåŠ¡
pm2 restart accounting-api

# 7. é‡å¯Nginxï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
sudo systemctl restart nginx
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è®¿é—®ç½‘ç«™

**æ£€æŸ¥æ¸…å•ï¼š**
```bash
# 1. æ£€æŸ¥Nginxæ˜¯å¦è¿è¡Œ
sudo systemctl status nginx

# 2. æ£€æŸ¥PM2æ˜¯å¦è¿è¡Œ
pm2 status

# 3. æ£€æŸ¥é˜²ç«å¢™
sudo ufw status  # Ubuntu
sudo firewall-cmd --list-all  # CentOS

# 4. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
sudo netstat -tulpn | grep :80
sudo netstat -tulpn | grep :3001

# 5. æ£€æŸ¥Nginxé…ç½®
sudo nginx -t
```

### é—®é¢˜2ï¼šå‰ç«¯å¯ä»¥è®¿é—®ï¼Œä½†APIè¯·æ±‚å¤±è´¥

**æ£€æŸ¥ï¼š**
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
pm2 status
pm2 logs accounting-api

# 2. æ£€æŸ¥APIåœ°å€é…ç½®
# æŸ¥çœ‹ src/services/api.ts ä¸­çš„ API_BASE_URL

# 3. æµ‹è¯•åç«¯API
curl http://localhost:3001/api/health
```

### é—®é¢˜3ï¼šæ•°æ®åº“æ–‡ä»¶æƒé™é—®é¢˜

```bash
# ç»™æ•°æ®åº“æ–‡ä»¶æƒé™
sudo chmod 666 /var/www/accounting-system/backend/accounting.db
sudo chown $USER:$USER /var/www/accounting-system/backend/accounting.db
```

### é—®é¢˜4ï¼šç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo lsof -i :3001
sudo lsof -i :80

# æ€æ­»å ç”¨è¿›ç¨‹
sudo kill -9 è¿›ç¨‹ID
```

### é—®é¢˜5ï¼šPM2æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
pm2 logs accounting-api --lines 50

# æ‰‹åŠ¨æµ‹è¯•å¯åŠ¨
cd /var/www/accounting-system/backend
node server.js
# çœ‹æ§åˆ¶å°è¾“å‡ºä»€ä¹ˆé”™è¯¯
```

---

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œé€é¡¹æ£€æŸ¥ï¼š

- [ ] Node.jså·²å®‰è£…ï¼š`node --version`
- [ ] é¡¹ç›®æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨
- [ ] å‰ç«¯ä¾èµ–å·²å®‰è£…ï¼š`ls node_modules`
- [ ] å‰ç«¯å·²æ„å»ºï¼š`ls dist`
- [ ] åç«¯ä¾èµ–å·²å®‰è£…ï¼š`cd backend && ls node_modules`
- [ ] PM2å·²å®‰è£…ï¼š`pm2 --version`
- [ ] åç«¯æœåŠ¡è¿è¡Œä¸­ï¼š`pm2 status`
- [ ] Nginxå·²å®‰è£…ï¼š`nginx -v`
- [ ] Nginxé…ç½®æ­£ç¡®ï¼š`sudo nginx -t`
- [ ] Nginxè¿è¡Œä¸­ï¼š`sudo systemctl status nginx`
- [ ] é˜²ç«å¢™å·²é…ç½®ï¼š`sudo ufw status` æˆ– `sudo firewall-cmd --list-all`
- [ ] ç½‘æ˜“äº‘å®‰å…¨ç»„å·²é…ç½®
- [ ] å¯ä»¥è®¿é—®ç½‘ç«™ï¼š`http://ä½ çš„æœåŠ¡å™¨IP`
- [ ] å¯ä»¥æ·»åŠ æ•°æ®å¹¶ä¿å­˜
- [ ] åˆ·æ–°é¡µé¢æ•°æ®ä¸ä¸¢å¤±

---

## ğŸ¯ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤æ€»ç»“

**ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰ï¼š**

```bash
# 1. å®‰è£…Node.jsï¼ˆUbuntuï¼‰
sudo apt update && sudo apt install -y nodejs npm git nginx

# 2. å®‰è£…PM2
sudo npm install -g pm2

# 3. è¿›å…¥é¡¹ç›®ç›®å½•ï¼ˆå‡è®¾å·²ä¸Šä¼ åˆ° /var/www/accounting-systemï¼‰
cd /var/www/accounting-system

# 4. å®‰è£…ä¾èµ–å’Œæ„å»º
npm install
npm run build
cd backend && npm install && cd ..

# 5. å¯åŠ¨åç«¯
cd backend
pm2 start server.js --name accounting-api
pm2 startup
pm2 save

# 6. é…ç½®Nginxï¼ˆéœ€è¦æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼‰
sudo nano /etc/nginx/sites-available/accounting
# ç²˜è´´é…ç½®ï¼Œä¿å­˜

# 7. å¯ç”¨Nginxé…ç½®
sudo ln -s /etc/nginx/sites-available/accounting /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

# 8. é…ç½®é˜²ç«å¢™
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs` å’Œ `sudo tail -f /var/log/nginx/error.log`
2. æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š`pm2 status` å’Œ `sudo systemctl status nginx`
3. æµ‹è¯•è¿æ¥ï¼š`curl http://localhost:3001/api/health`

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰

