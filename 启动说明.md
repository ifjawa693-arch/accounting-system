# 系统启动说明

## 📋 启动前准备

确保你已经安装了以下软件：
- **Node.js** (版本 14 或更高)
- **npm** (通常随 Node.js 一起安装)

## 🚀 启动步骤

### 方法一：使用命令行（推荐）

#### 1. 打开两个终端窗口

**Windows PowerShell 或 CMD：**
- 按 `Win + R`，输入 `powershell` 或 `cmd`，回车
- 再打开一个同样的窗口（总共需要两个）

#### 2. 启动后端服务器

在**第一个终端**中执行：

```powershell
# 进入项目目录（如果不在项目目录）
cd D:\Cursor\program

# 进入后端目录
cd backend

# 安装依赖（首次启动需要，之后可跳过）
npm install

# 启动后端服务器
npm start
```

**成功标志：**
```
🚀 后端服务器启动成功！
📡 API地址: http://localhost:3001
💾 数据库: SQLite (accounting.db)
```

**⚠️ 注意：** 这个窗口要保持打开，不要关闭！

#### 3. 启动前端开发服务器

在**第二个终端**中执行：

```powershell
# 进入项目根目录（如果不在项目目录）
cd D:\Cursor\program

# 安装依赖（首次启动需要，之后可跳过）
npm install

# 启动前端开发服务器
npm run dev
```

**成功标志：**
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

**⚠️ 注意：** 这个窗口也要保持打开！

#### 4. 访问系统

打开浏览器，访问：**http://localhost:5173/**

---

## 🛑 停止系统

### 停止前端
在运行 `npm run dev` 的终端窗口中，按 `Ctrl + C`

### 停止后端
在运行 `npm start` 的终端窗口中，按 `Ctrl + C`

### 如果无法停止（端口被占用）

**Windows PowerShell：**
```powershell
# 停止所有 Node.js 进程
taskkill /F /IM node.exe
```

**Windows CMD：**
```cmd
taskkill /F /IM node.exe
```

---

## 🔧 常见问题

### 1. 端口被占用

**错误信息：** `Error: listen EADDRINUSE: address already in use :::3001`

**解决方法：**
```powershell
# 停止所有 Node.js 进程
taskkill /F /IM node.exe

# 然后重新启动
```

### 2. 找不到模块

**错误信息：** `Cannot find module 'xxx'`

**解决方法：**
```powershell
# 在项目根目录执行
npm install

# 在后端目录执行
cd backend
npm install
```

### 3. 数据库错误

**错误信息：** `SQLITE_ERROR: no such table`

**解决方法：**
- 删除 `backend/accounting.db` 文件
- 重新启动后端服务器（会自动创建数据库）

### 4. 前端无法连接后端

**检查清单：**
- ✅ 后端是否已启动（检查第一个终端窗口）
- ✅ 后端地址是否为 `http://localhost:3001`
- ✅ 浏览器控制台是否有错误信息

---

## 📝 快速启动命令（复制粘贴）

### 后端启动
```powershell
cd D:\Cursor\program\backend
npm start
```

### 前端启动
```powershell
cd D:\Cursor\program
npm run dev
```

---

## 🎯 启动顺序

**重要：必须先启动后端，再启动前端！**

1. ✅ 启动后端（第一个终端）
2. ✅ 等待后端启动成功
3. ✅ 启动前端（第二个终端）
4. ✅ 等待前端启动成功
5. ✅ 打开浏览器访问 http://localhost:5173/

---

## 💡 提示

- 两个终端窗口都要保持打开，关闭窗口会停止对应的服务
- 修改代码后，前端会自动刷新（热更新）
- 修改后端代码后，需要重启后端服务器
- 首次启动可能需要较长时间（安装依赖）

---

## 📞 需要帮助？

如果遇到问题：
1. 检查两个服务是否都正常启动
2. 查看终端窗口的错误信息
3. 检查端口是否被占用
4. 确认 Node.js 版本是否正确

